version: '3.8'

services:
  analyzer:
    build:
      context: .
      args:
        GIT_USER_NAME: ${GIT_USER_NAME}
        GIT_USER_EMAIL: ${GIT_USER_EMAIL}
    container_name: nginx-log-analyzer
    restart: unless-stopped
    volumes:
      - /var/log/nginx:/app/logs:ro
      - ./:/app/output
    environment:
      - GIT_TOKEN=${GIT_TOKEN}
      - GIT_REPO=${GIT_REPO}
    working_dir: /app/output

